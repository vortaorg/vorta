#!/bin/bash

# Get current environment variables defined in .env
source .env
echo "Running deploy script"

forge script forge-script/DeploySystem.s.sol:DeploySystem --rpc-url $RPC_URL --skip-simulation --slow --broadcast --verify --verifier blockscout --verifier-url "https://explorer.sepolia.mantle.xyz/api?module=contract&action=verify" -vvvv --via-ir

# curl -X POST -H "Content-Type: application/json" --data '{"jsonrpc":"2.0","method":"eth_call","params":[{"to":"0xDB45428b0fa82A087ACe3e5d249bd6c102c04756","data":"0x38d8480a000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004de04000300810000002f2f8ec66efc7e0f2062bf81f401361eabf08789bdd8911b7ae06d3cf7d60b2c4b14e1100bca092c6f25923cf81841dcb5f45ea9961974e1dbbd8f3b69d9d0ecebd969b7662f315490ed33dcbf5d1cc04caaaeec85e678af4f94157d0f5f55172f2f64e8d3c3a34db17c5575632c6fcf3819d87ccd88ee6044ddd25dd599320f176ac4fc5fb1273c7741d0751f468b50c5c83aaf984f537171032bcec3d1dab6b29d316875a455a37a0550d00c1d9e1e164312c793ee937e0ab13c80226c778ca33f7f710c59b37fcdb0f987c194117fa2e321d47ccb06c3c1760643e7197fc920ff3c8e89ed6b0798f354709e815cee5db599c037b3b9df138e052f39782a5f0cce7511f1f48cfe5012c1096eca9bb3e3c98cef775091a1f4b5b3fc0f95227fb77374db5d9f19e5cc87f8a00035e9d6e1334f43cda432870bfe6ef8557616d2e814defa7cc2589c7656df69c1e6f38445228eabe7e8cead783e8a252ba1b395675ac0e42ef509212f254599a67d3d5dda4602003c0a8ffc88c562d3d19e0ab27739954907b8e299293663910b01f6528b8be5a1e905290a625af20df4c1bbbe87902307e5a592e7890a0ee8467a0f2ae0ff56b6832014cdae4bc45bec7905c94c37b28f8c3927e9d1fcab4824e37a3cdb6501a03e1c1e245e18fee01448eaf80a1493894579b50c4b9c66a94186ff3e22e6ec3b9297ba8edf1e78cc34f8b1dfed0467d3a1e1a6ab7caba46b6f830df0f36a9177c23c54732aab18991778db03d237a67d5ed308ffc07b1e05c22d3adf1cba9dee8acaeb999d28f1b385b7b05b915952e3c8780f6789dad1bc2a86004883867608014c13967b5ca9d82a9ea20c91cd859eb95c04fac7ae4e2880d9e83162020000c4930b633c25f388652e85b32e0c04499a5caabdc631d87ecc5f6ae5d28982964f779a5aa696c56a33fd9605d36f762898d13d80b57061b9bc4123195b293ddb8d2288fdb473d88f11b208470db03b0fdbd06f6bf2920b957e51f0bab9bc63f8e60f5c2aa3eae221f6a15e4fe1c79999e7a5a87a7f32c0133627415ec8d8785d0000dc010000abe00a48a9aa3e696c05a2d04cd87d9f32e9410080ff5e5a763915026f5637f562c5a8454eff63f940990a19757dd112aefd2092a9f2734132aeca1d99a3b1c1df1ad6c2a8260debf411834c5513f746ed02d51130469d4c07a147bf084395e628a8985a91e6c63b231eb9b5a30e9c8cc4212d0e65c929103ce4e1f3193d296c7975c47becac72cc0f19f35712f42262084d94279cc580aa689be3147fe2e482d02c128131504fe363935c0676f15ced79d20599402623f97cf8c17f172031c7c60c7c254ca0db833cc37d4071b29b2f3995f0765d574f595672fc48f739451f59fab82edd001d221e0efa6bb2648d576e62bcda803b0833ec1ed450f3914c60a5d938fb3d78c206e8d8c1f816840cfcded0503bd46b79be422f280a62a6cd8aa124b9d88ae8df0982a221756b7a665ba0e74b99b9a6cbc00cfcb7afe8b7e9beeba7c9fa86465743b3962ef165a6dfaf3b990468b5609e9badcf08aed559f179a2ab01e4034ef4c5369c06def3d4f707bc901185b6a88dccb904f56d1e1df73f32709f6d48c3e3bb8cf196a15cf15509a7942283796f34bbe511506d47286b9cf54e5ddcb7bf66b13f1f9aecdcf01d1bab18ca14ed3aa8983aa22f30d2f2e0a00a00000000000000000000000fba0a000000000000000000000000000000"},"latest"],"id":1}' https://rpc.sepolia.mantle.xyz
